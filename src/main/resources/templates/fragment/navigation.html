<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <body>
    <nav th:fragment="navigation" class="bg-dark">
      <script>
        function movieSearchEnter() {
          if(window.event.keyCode == 13) {
            var title = $('input[name=title]').val();
            if(title.length > 0) {
              location.href = '/movie/list?genreId=&title=' + title;
            } else {
              alert('제목을 입력하세요');
            }
          }
        }

        function movieSearch() {
          var title = $('input[name=title]').val();
          location.href = '/movie/list?genreId=&title=' + title;
        }
      </script>
      <div class="nav-div">
        <div class="floatL">
          <a class="logo" th:href="@{/disney}" href="./index.html">MovieStory</a>
        </div>
        <div class="floatL">
          <a th:href="@{/movie/list}" href="./movie/movieList.html">영화 소개</a>
          <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/movie/create}" class="ml0p5r">영화 등록</a>
          <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/movie/list}" class="ml0p5r">영화 관리</a>
          <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/genre/create}" class="ml0p5r">장르 등록</a>
          <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/genre/list}" class="ml0p5r">장르 관리</a>
        </div>
        <div class="floatR">
          <a sec:authorize="isAnonymous()" th:href="@{/user/loginForm}">로그인/회원가입</a>
          <a sec:authorize="isAuthenticated()" th:href="@{/user/myPage}">마이페이지</a>
          <span sec:authorize="isAuthenticated()" class="floatR">
            <form th:action="@{/user/logout}" method="post">
              <button type="submit" class="logoutBtn cursor-pointer">로그아웃</button>
            </form>
          </span>
        </div>
        <div class="floatR search">
          <input class="search-input" name="title" type="text" placeholder="영화제목 입력" onkeyup="movieSearchEnter()">
          <img class="search-img" src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png" onclick="movieSearch()">
        </div>
      </div>
    </nav>
    <nav th:fragment="navigation-movie" class="bg-dark">
      <div class="nav-div">
        <div class="floatL">
          <a class="logo" th:href="@{/disney}" href="./index.html">MovieStory</a>
        </div>
        <div class="floatL">
          <a th:href="@{/movie/list}" href="./movie/movieList.html">영화 소개</a>
          <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/movie/create}" class="ml0p5r">영화 등록</a>
          <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/movie/list}" class="ml0p5r">영화 관리</a>
          <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/genre/create}" class="ml0p5r">장르 등록</a>
          <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin/genre/list}" class="ml0p5r">장르 관리</a>
        </div>
        <div class="floatR">
          <a sec:authorize="isAnonymous()" th:href="@{/user/loginForm}" href="./user/login.html">로그인/회원가입</a>
          <a sec:authorize="isAuthenticated()" th:href="@{/user/myPage}" href="./user/myPage2.html">마이페이지</a>
          <span sec:authorize="isAuthenticated()" class="floatR">
            <form th:action="@{/user/logout}" method="post">
              <button type="submit" class="logoutBtn cursor-pointer">로그아웃</button>
            </form>
          </span>
        </div>
      </div>
    </nav>
  </body>
</html>